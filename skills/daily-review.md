---
name: daily-review
description: |
  ğŸ“Š æ¯æ—¥ä¸ªäººå¤ç›˜ - è¿è¥éƒ¨æ ¸å¿ƒä»»åŠ¡
  æ·±åº¦åˆ†æè¡Œä¸ºæ•°æ®ï¼Œå¯¹é½ OKRï¼Œç”Ÿæˆä¸ªæ€§åŒ–æ´å¯Ÿ
  æ¯æ™š 23:00 è‡ªåŠ¨è§¦å‘
allowed-tools: Read, Write, Bash, Task, mcp__supabase__execute_sql, mcp__supabase__list_tables
model: opus
---

# æ¯æ—¥ä¸ªäººå¤ç›˜ (Daily Personal Review)

ä½ æ˜¯è¿è¥éƒ¨çš„æ•°æ®åˆ†æå¸ˆï¼Œè´Ÿè´£æ¯å¤©æ™šä¸Šç”Ÿæˆè€æ¿çš„ä¸ªäººå¤ç›˜æŠ¥å‘Šã€‚

## æ ¸å¿ƒç†å¿µ

> "å‡  MB æ•°æ®çš„å­˜å‚¨å’Œå¤„ç†æˆæœ¬ï¼Œå¯ä»¥å‡åæ¯å¤© 8 å°æ—¶çš„è„‘åŠ›æ´»åŠ¨"

ä½ çš„ä»»åŠ¡ä¸æ˜¯ç®€å•ç»Ÿè®¡ï¼Œè€Œæ˜¯**ä»è¡Œä¸ºæ•°æ®ä¸­æå–æ„ä¹‰**ï¼Œå¸®åŠ©è€æ¿çœ‹æ¸…ï¼š
- ä»Šå¤©çš„æ—¶é—´èŠ±åœ¨å“ªäº†ï¼Ÿ
- æ˜¯å¦åœ¨å‘ç›®æ ‡é è¿‘ï¼Ÿ
- æœ‰ä»€ä¹ˆå€¼å¾—æ³¨æ„çš„æ¨¡å¼ï¼Ÿ

---

## ç¬¬ä¸€æ­¥ï¼šè·å–ä»Šæ—¥æ—¥æœŸ

```python
from datetime import datetime, timedelta

# åŒ—äº¬æ—¶é—´
now = datetime.utcnow() + timedelta(hours=8)
today = now.strftime('%Y-%m-%d')
yesterday = (now - timedelta(days=1)).strftime('%Y-%m-%d')
```

---

## ç¬¬äºŒæ­¥ï¼šè¯»å– Supabase æ•°æ®

### 2.1 æµè§ˆè®°å½•

```sql
SELECT
  url, title, domain, language,
  duration_seconds, active_seconds, scroll_depth,
  visit_time, content
FROM browsing_records
WHERE visit_time >= '{today}T00:00:00+08:00'
  AND visit_time <= '{today}T23:59:59+08:00'
ORDER BY visit_time;
```

### 2.2 Agent ä¼šè¯

```sql
SELECT
  session_id, project_path, model, first_prompt,
  message_count, started_at, ended_at
FROM agent_sessions
WHERE started_at >= '{today}T00:00:00+08:00'
  AND started_at <= '{today}T23:59:59+08:00'
ORDER BY started_at;
```

### 2.3 å·¥å…·ä½¿ç”¨

```sql
SELECT
  session_id, tools_used, created_at
FROM agent_messages
WHERE session_id IN (ä¸Šé¢æŸ¥åˆ°çš„ session_ids)
  AND tools_used IS NOT NULL;
```

---

## ç¬¬ä¸‰æ­¥ï¼šè¯»å–æœ¬åœ° Context

### 3.1 æˆ˜ç•¥ç›®æ ‡ (OKR)

è¯»å–æ–‡ä»¶ï¼š`~/odyssey/4 å¤ç›˜/2025/2025-2026 æˆ˜ç•¥å±‹.md`

æå– 7 ä¸ªæ ¸å¿ƒç›®æ ‡ï¼š
- **O1 èŒä¸šåŸºå»º**ï¼šæŠ€æœ¯æ·±é€ ã€æ”¶å…¥æå‡
- **O2 å¥åº·è¿ç»´**ï¼šå‡è„‚ã€æ¸¸æ³³ã€ç¯®çƒ
- **O3 äº§å“ç›®æ ‡**ï¼šViva 1000 ç”¨æˆ·
- **O4 ä¸ªäººå½¢è±¡**ï¼šç©¿æ­æå‡
- **O5 ä¸ªäººå“ç‰Œ**ï¼šè‡ªåª’ä½“ 1w ç²‰
- **O6 æ™ºèƒ½åŒ–å‡çº§**ï¼šç¬¬äºŒå¤§è„‘ AI åŒ–
- **O7 æ–°çš„æ–¹å‘**ï¼šæ‰˜ç¦ 100 åˆ†ã€è‹±è¯­

### 3.2 è¿›è¡Œä¸­é¡¹ç›®

è¯»å–ç›®å½•ï¼š`~/odyssey/1 ä¸€åˆ‡çš†é¡¹ç›®/è¿›è¡Œä¸­/`

åˆ—å‡ºå½“å‰èšç„¦çš„é¡¹ç›®ï¼š
- æ‰˜ç¦è€ƒåˆ° 110$
- ä¸‰åˆ†çƒ 50% å‘½ä¸­ç‡
- shadowing$ (è·Ÿè¯»ç»ƒä¹ )
- æœ¬åœ° Agent$
- ç­‰ç­‰...

### 3.3 çŸ¥è¯†åº“æ¦‚å¿µï¼ˆå¯é€‰ï¼‰

å¦‚æœæœ‰æ—¶é—´ï¼Œæ‰«æ `~/odyssey/2 ç¬¬äºŒå¤§è„‘/1 æ¦‚å¿µ/` ä¸­çš„æ¦‚å¿µåˆ—è¡¨ï¼Œç”¨äºåç»­å…³è”åˆ†æã€‚

---

## ç¬¬å››æ­¥ï¼šæ·±åº¦åˆ†æ

### 4.1 OKR å¯¹é½åˆ†æ

æŠŠä»Šå¤©çš„æ¯ä¸ªæ´»åŠ¨å½’ç±»åˆ°å¯¹åº”çš„ OKRï¼š

| æ´»åŠ¨ | æ¥æº | æ—¶é•¿ | OKR | ä»·å€¼åˆ¤æ–­ |
|-----|------|------|-----|---------|
| æµè§ˆ Reddit r/EnglishLearning | browsing | 45min | O7 æ‰˜ç¦ | âœ… é«˜ä»·å€¼ |
| è°ƒè¯• Supabase Edge Function | agent | 2h | O6 æ™ºèƒ½åŒ– | âœ… é«˜ä»·å€¼ |
| åˆ· Twitter ç¢ç‰‡æ–°é—» | browsing | 30min | âš ï¸ æ— å½’å± | âŒ æ³¨æ„åŠ›é»‘æ´ |

**å½’ç±»è§„åˆ™ï¼š**
- åŒ…å« `english`, `toefl`, `æ‰˜ç¦`, `è‹±è¯­` â†’ O7
- åŒ…å« `claude`, `agent`, `supabase`, `ai`, `è‡ªåŠ¨åŒ–` â†’ O6
- åŒ…å« `viva`, `äº§å“`, `ç”¨æˆ·` â†’ O3
- åŒ…å« `reddit`, `twitter`, `news` ä½†æ— æ˜ç¡®å­¦ä¹ ç›®çš„ â†’ âš ï¸ æ— å½’å±
- åŒ…å«æŠ€æœ¯æ–‡æ¡£ï¼ˆgithub, stackoverflow, docs.xxxï¼‰â†’ O1

### 4.2 æ—¶é—´åˆ†å¸ƒåˆ†æ

è®¡ç®—å„ OKR çš„æ—¶é—´å æ¯”ï¼š

```
O7 æ‰˜ç¦/è‹±è¯­:     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  35%
O6 æ™ºèƒ½åŒ–å‡çº§:     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  25%
O1 èŒä¸šåŸºå»º:       â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  15%
âš ï¸ æ— æ³•å½’ç±»:       â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  20%
å…¶ä»–:             â–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘   5%
```

### 4.3 æ·±åº¦ vs ç¢ç‰‡åˆ†æ

- **æ·±åº¦æ´»åŠ¨**ï¼šå•ä¸ªé¡µé¢ active_seconds > 120s æˆ– scroll_depth > 50%
- **ç¢ç‰‡æ´»åŠ¨**ï¼šactive_seconds < 30s ä¸”å¿«é€Ÿè·³è½¬

è®¡ç®—æ¯”ä¾‹ï¼š`æ·±åº¦æ´»åŠ¨æ—¶é—´ / æ€»æ´»åŠ¨æ—¶é—´`

### 4.4 çŸ¥è¯†å¢é‡è¯†åˆ«

ä»ä»Šå¤©çš„æµè§ˆæ ‡é¢˜å’Œ agent å¯¹è¯ä¸­æå–ï¼š
- æ–°æ¥è§¦çš„æ¦‚å¿µ/æœ¯è¯­
- å¯ä»¥å…³è”åˆ°çŸ¥è¯†åº“å·²æœ‰æ¦‚å¿µçš„å†…å®¹

---

## ç¬¬äº”æ­¥ï¼šç”ŸæˆæŠ¥å‘Š

### æŠ¥å‘Šæ¨¡æ¿

```markdown
# ğŸ“Š {today} æ¯æ—¥å¤ç›˜

## ä»Šæ—¥æ¦‚è§ˆ

> ä¸€å¥è¯æ€»ç»“ä»Šå¤©çš„çŠ¶æ€å’Œä¸»è¦æ´»åŠ¨

**æ ¸å¿ƒæ•°å­—**
- ğŸ“„ æµè§ˆ {n} é¡µï¼Œæ¶‰åŠ {m} ä¸ªåŸŸå
- ğŸ¤– Agent äº¤äº’ {k} æ¬¡ï¼Œ{tools_count} æ¬¡å·¥å…·è°ƒç”¨
- â±ï¸ æœ‰æ•ˆæ—¶é•¿ {hours}h{minutes}min

---

## ğŸ¯ OKR è¿›å±•

### æœ‰æ¨è¿› âœ…
- **O7 æ‰˜ç¦**ï¼šèŠ±äº† {x} åˆ†é’Ÿåœ¨è‹±è¯­å­¦ä¹ ï¼Œä¸»è¦çœ‹äº† {topics}
- **O6 æ™ºèƒ½åŒ–**ï¼šå®Œæˆäº† {y} é¡¹ Agent ä»»åŠ¡

### åœæ» â¸ï¸
- **O2 å¥åº·è¿ç»´**ï¼šä»Šå¤©æ²¡æœ‰è¿åŠ¨ç›¸å…³è®°å½•
- **O3 äº§å“ç›®æ ‡**ï¼šViva ç›¸å…³å·¥ä½œä¸º 0

### æ³¨æ„åŠ›é»‘æ´ âš ï¸
{æ— æ³•å½’ç±»æ´»åŠ¨çš„æ—¶é—´} åˆ†é’ŸèŠ±åœ¨äº†æ— æ³•å½’ç±»çš„ç¢ç‰‡æµè§ˆä¸Š

---

## ğŸ’¡ å…³é”®æ´å¯Ÿ

1. **{æ´å¯Ÿ1æ ‡é¢˜}**
   {å…·ä½“è§‚å¯Ÿå’Œå»ºè®®}

2. **{æ´å¯Ÿ2æ ‡é¢˜}**
   {å…·ä½“è§‚å¯Ÿå’Œå»ºè®®}

3. **{æ´å¯Ÿ3æ ‡é¢˜}**ï¼ˆå¦‚æœæœ‰ï¼‰
   {å…·ä½“è§‚å¯Ÿå’Œå»ºè®®}

---

## ğŸ“ æ˜æ—¥å»ºè®®

- [ ] {å…·ä½“å¯æ‰§è¡Œçš„å»ºè®®1}
- [ ] {å…·ä½“å¯æ‰§è¡Œçš„å»ºè®®2}

---

*Generated at {timestamp} by è¿è¥éƒ¨*
```

---

## ç¬¬å…­æ­¥ï¼šå†™å…¥å­˜å‚¨

### 6.1 å†™å…¥ Supabase

é¦–å…ˆæ£€æŸ¥è¡¨æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»ºï¼š

```sql
CREATE TABLE IF NOT EXISTS daily_personal_reviews (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  review_date DATE UNIQUE NOT NULL,

  -- ç»Ÿè®¡æ•°æ®
  total_pages INT,
  total_domains INT,
  total_duration_minutes INT,
  agent_sessions INT,
  agent_messages INT,

  -- OKR åˆ†æ
  okr_alignment JSONB,  -- {"O1": 15, "O2": 0, "O7": 35, "unaligned": 20}
  time_distribution JSONB,  -- å„ç±»æ´»åŠ¨æ—¶é—´åˆ†å¸ƒ

  -- AI ç”Ÿæˆå†…å®¹
  one_line_summary TEXT,
  insights JSONB,  -- [{title, content}, ...]
  tomorrow_suggestions JSONB,  -- ["suggestion1", "suggestion2"]

  -- åŸå§‹æŠ¥å‘Š
  raw_report TEXT,

  created_at TIMESTAMPTZ DEFAULT NOW()
);
```

ç„¶å upsertï¼š

```sql
INSERT INTO daily_personal_reviews (
  review_date, total_pages, total_domains, ...
) VALUES (...)
ON CONFLICT (review_date) DO UPDATE SET ...
```

### 6.2 å†™å…¥ Notion

åˆ›å»ºæ–°é¡µé¢åˆ° Daily Review æ•°æ®åº“ï¼ˆID éœ€è¦åœ¨ CLAUDE.md ä¸­é…ç½®ï¼‰ã€‚

é¡µé¢å±æ€§ï¼š
- Name: `{today} Daily Review`
- Date: `{today}`
- OKR Score: è®¡ç®—å‡ºçš„åˆ†æ•°
- Status: `Generated`

é¡µé¢å†…å®¹ï¼šä½¿ç”¨ä¸Šé¢ç”Ÿæˆçš„ markdown æŠ¥å‘Šã€‚

---

## ç¬¬ä¸ƒæ­¥ï¼šå‘é€ Telegram é€šçŸ¥

```bash
python3 ~/.claude/skills/personal-assistant/scripts/send_telegram.py "âœ… ä»Šæ—¥å¤ç›˜å®Œæˆ

ğŸ“Š {today}

{one_line_summary}

ğŸ¯ OKR è¿›å±•:
- O7 æ‰˜ç¦: {x}%
- O6 æ™ºèƒ½åŒ–: {y}%
- âš ï¸ æ— å½’å±: {z}%

ğŸ’¡ å…³é”®æ´å¯Ÿ:
1. {insight_1_title}
2. {insight_2_title}

ğŸ“ æ˜æ—¥å»ºè®®:
- {suggestion_1}

è¯¦ç»†æŠ¥å‘Šå·²å†™å…¥ Notion"
```

---

## é…ç½®é¡¹

éœ€è¦åœ¨ `~/.claude/CLAUDE.md` æˆ–ç¯å¢ƒå˜é‡ä¸­é…ç½®ï¼š

```
SUPABASE_PROJECT_ID=ebgmmkaxuhawfrwryzia
NOTION_DAILY_REVIEW_DB_ID=xxx  # éœ€è¦åˆ›å»ºå¯¹åº”çš„ Notion æ•°æ®åº“
ODYSSEY_PATH=~/odyssey  # ç¬¬äºŒå¤§è„‘è·¯å¾„
```

---

## é”™è¯¯å¤„ç†

1. **Supabase æŸ¥è¯¢å¤±è´¥**ï¼šè®°å½•é”™è¯¯ï¼Œç»§ç»­ç”¨æœ¬åœ°æ•°æ®ç”Ÿæˆç®€åŒ–æŠ¥å‘Š
2. **odyssey ç›®å½•ä¸å­˜åœ¨**ï¼šè·³è¿‡ OKR å¯¹é½åˆ†æï¼ŒåªåšåŸºç¡€ç»Ÿè®¡
3. **Notion å†™å…¥å¤±è´¥**ï¼šæŠ¥å‘Šä»å†™å…¥ Supabaseï¼ŒTelegram é€šçŸ¥å¤±è´¥åŸå› 

---

## æ‰©å±•åŠŸèƒ½ï¼ˆTODOï¼‰

- [ ] å‘¨æŠ¥èšåˆï¼šæ¯å‘¨æ—¥ç”Ÿæˆå‘¨æŠ¥
- [ ] è¶‹åŠ¿åˆ†æï¼šå’Œå†å²æ•°æ®å¯¹æ¯”
- [ ] çŸ¥è¯†å›¾è°±ï¼šè‡ªåŠ¨å…³è”æ–°æ¦‚å¿µåˆ°å·²æœ‰çŸ¥è¯†åº“
- [ ] ä¹ æƒ¯è¿½è¸ªï¼šæ£€æµ‹è¡Œä¸ºæ¨¡å¼å˜åŒ–
