# xhs-note - 小红书笔记生产

一键生成小红书笔记封面，整合布局、搜索、AI 生图的完整流程。

## 触发词

- "做个小红书封面"
- "小红书笔记"
- "xhs封面"

## 能力

1. **自动判断风格** - 根据内容类型选择最佳风格
2. **智能搜索** - 人物类自动搜索真实照片
3. **AI 生图** - 调用 Nanobanana/Gemini 生成封面
4. **后处理** - 抠图、合成（可选）

## 执行流程

当用户请求生成小红书笔记/封面时：

### Step 1: 解析需求

从用户输入中提取：
- `subject`: 主题/人物名
- `style`: 风格（自动推断或用户指定）
- `size`: 尺寸（默认 1080x1440）

### Step 2: 风格推断

| 内容类型 | 推荐风格 |
|----------|----------|
| 人物介绍/KOL | 线刻肖像 |
| 工具推荐/干货 | 手绘白板 |
| 教程/科普 | 板书插画 |
| 知识对比 | 学霸笔记 |
| Before/After | 对比漫画 |

### Step 3: 调用生成脚本

```bash
source ~/.claude/secrets.env
cd ~/.claude/skills/api-draw/scripts

# 带搜索的完整流程
python draw_with_search.py "<描述>" \
    --style <风格> \
    --subject <主题> \
    --width 1080 --height 1440
```

### Step 4: 返回结果

输出生成的封面路径，并用 Read tool 展示给用户。

## 参数

| 参数 | 说明 | 默认值 |
|------|------|--------|
| style | 风格名 | 根据内容自动推断 |
| subject | 主题标签 | 从描述中提取 |
| width | 宽度 | 1080 |
| height | 高度 | 1440 |
| ref-image | 手动指定参考图 | 无（自动搜索） |

## 示例

```
用户：做个峰哥亡命天涯的小红书介绍
→ 解析：人物介绍类 → 线刻肖像风格 → 自动搜索照片 → 生成

用户：做个 5 个 AI 工具推荐的封面
→ 解析：工具推荐类 → 手绘白板风格 → 直接生成

用户：做个 Claude Code 教程封面
→ 解析：教程类 → 板书插画风格 → 直接生成
```

## 输出

生成的图片保存在：`~/.claude/Nanobanana-draw-图片/`
